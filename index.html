<style>
body{margin:0;font-family:sans-serif;background:#f4f6f9;text-align:center;}
button{
  padding:15px 0;       /* ã‚¹ã‚¿ãƒ¼ãƒˆã¨åŒã˜ãã‚‰ã„ã®å¤§ãã• */
  font-size:24px;       /* ã‚¹ã‚¿ãƒ¼ãƒˆã¨åŒã˜ãã‚‰ã„ */
  width:60%;            /* ã‚¹ã‚¿ãƒ¼ãƒˆã¨åŒã˜ãã‚‰ã„ã®å¹… */
  padding:15px 0;
  font-size:24px;
  width:60%;
  margin:10px auto;
  display:block;
  border:none;
@@ -20,18 +20,25 @@
}
button:hover{background:#357ae8;}
#sizeSelect{
  width:60%;            /* ã‚¹ã‚¿ãƒ¼ãƒˆã¨åŒã˜å¹… */
  font-size:24px;       /* ã‚¹ã‚¿ãƒ¼ãƒˆã¨åŒã˜ã‚µã‚¤ã‚º */
  width:60%;
  font-size:24px;
  padding:10px;
  margin:10px auto 20px auto;
  display:block;
  border-radius:10px;
  border:1px solid #ccc;
  text-align:center;
}
#board{display:grid;margin:10px auto;gap:4px;}
.tile{aspect-ratio:1/1;background:linear-gradient(145deg,#6fb1fc,#4364f7);
color:white;font-weight:bold;display:flex;justify-content:center;align-items:center;border-radius:10px;font-size:clamp(10px,2.5vw,28px);}
#board{display:grid;margin:10px auto;gap:4px; touch-action: none;}
.tile{
  aspect-ratio:1/1;
  background:linear-gradient(145deg,#6fb1fc,#4364f7);
  color:white;font-weight:bold;display:flex;
  justify-content:center;align-items:center;border-radius:10px;
  font-size:clamp(10px,2.5vw,28px);
  transition: transform 0.2s;
}
.tile.smooth{transition: transform 0.3s ease;}
.empty{background:transparent;}
.podium{display:flex;justify-content:center;align-items:flex-end;gap:10px;margin:10px 0;}
.podiumItem{width:95px;padding:8px;border-radius:12px 12px 0 0;color:white;font-weight:bold;}
@@ -87,13 +94,16 @@ <h3>ğŸ† ãƒ©ãƒ³ã‚­ãƒ³ã‚°</h3>
<h1>è©³ç´°</h1>
<button onclick="showDetail('stats')">çµ±è¨ˆ</button>
<button onclick="showDetail('ranking')">ãƒ©ãƒ³ã‚­ãƒ³ã‚°</button>
<button onclick="showDetail('settings')">è¨­å®š</button>
<div id="detailContent"></div>
<br>
<button onclick="showScreen('homeScreen')">ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</button>
</div>

<script>
let size=4, board=[], emptyIndex, moveCount=0;
let tileSmooth=true;
let tileFontSize='medium';

// ç”»é¢åˆ‡ã‚Šæ›¿ãˆ
function showScreen(id){
@@ -127,9 +137,39 @@ <h1>è©³ç´°</h1>
      podium.appendChild(d);
    });
    content.appendChild(podium);
  } else if(type==='settings'){
    const div=document.createElement('div');
    div.innerHTML=`
      <h3>è¨­å®š</h3>
      <label>ã‚¿ã‚¤ãƒ«ã®å‹•ãã®æ»‘ã‚‰ã‹ã•:
        <select id="smoothSelect" onchange="updateSmooth()">
          <option value="true" ${tileSmooth?'selected':''}>æ»‘ã‚‰ã‹</option>
          <option value="false" ${!tileSmooth?'selected':''}>æ™®é€š</option>
        </select>
      </label><br><br>
      <label>ã‚¿ã‚¤ãƒ«ã®æ•°å­—ã‚µã‚¤ã‚º:
        <select id="fontSizeSelect" onchange="updateFontSize()">
          <option value="small" ${tileFontSize==='small'?'selected':''}>å°</option>
          <option value="medium" ${tileFontSize==='medium'?'selected':''}>æ¨™æº–</option>
          <option value="large" ${tileFontSize==='large'?'selected':''}>å¤§</option>
        </select>
      </label>
    `;
    content.appendChild(div);
  }
}

// è¨­å®šæ›´æ–°
function updateSmooth(){
  tileSmooth = document.getElementById('smoothSelect').value==='true';
  render();
}

function updateFontSize(){
  tileFontSize = document.getElementById('fontSizeSelect').value;
  render();
}

// ã‚²ãƒ¼ãƒ é–‹å§‹
function startGame(){
  size=parseInt(document.getElementById('sizeSelect').value);
@@ -148,6 +188,7 @@ <h1>è©³ç´°</h1>
  moveCount=0;
  moveCountDisplay();
  render();
  enableSwipe(); // ã‚¹ãƒ¯ã‚¤ãƒ—æœ‰åŠ¹åŒ–
  showScreen('gameScreen');
  updateStats("play");
  loadRanking();
@@ -162,28 +203,54 @@ <h1>è©³ç´°</h1>
  boardEl.style.width=maxSize+"px";
  boardEl.style.height=maxSize+"px";

  let fontMultiplier = tileFontSize==='small'?0.5: tileFontSize==='medium'?0.8 : 1.2;
  const tileSize = maxSize/size;

  board.forEach((n,i)=>{
    const d=document.createElement("div");
    d.className="tile";
    if(n===null)d.classList.add("empty");
    else{
    if(tileSmooth)d.classList.add('smooth');
    if(n!==null){
      d.textContent=n;
      d.style.fontSize = Math.floor(tileSize*fontMultiplier)+'px';
      d.onclick=()=>move(i);
    }
    } else d.classList.add("empty");
    boardEl.appendChild(d);
  });
}

// ç§»å‹•
function move(i){
  if(getMoves(emptyIndex).includes(i)){
    [board[emptyIndex],board[i]]=[board[i],board[emptyIndex]];
    emptyIndex=i;
    moveCount++;
    moveCountDisplay();
    render();
    if(clearCheck())setTimeout(clearGame,100);
  }
// ã‚¹ãƒ¯ã‚¤ãƒ—æ“ä½œå¯¾å¿œ
let startX, startY;
function enableSwipe(){
  const boardEl=document.getElementById("board");
  boardEl.addEventListener('touchstart', e=>{
    const t=e.touches[0];
    startX=t.clientX;
    startY=t.clientY;
  });
  boardEl.addEventListener('touchend', e=>{
    const t=e.changedTouches[0];
    const dx=t.clientX-startX;
    const dy=t.clientY-startY;
    if(Math.abs(dx)>Math.abs(dy)){
      if(dx>20) swipe('right');
      else if(dx<-20) swipe('left');
    } else {
      if(dy>20) swipe('down');
      else if(dy<-20) swipe('up');
    }
  });
}

function swipe(dir){
  const r=Math.floor(emptyIndex/size);
  const c=emptyIndex%size;
  let target=null;
  if(dir==='up'&&r<size-1) target=emptyIndex+size;
  else if(dir==='down'&&r>0) target=emptyIndex-size;
  else if(dir==='left'&&c<size-1) target=emptyIndex+1;
  else if(dir==='right'&&c>0) target=emptyIndex-1;
  if(target!==null) move(target);
}

// ç§»å‹•å¯èƒ½
@@ -265,4 +332,4 @@ <h1>è©³ç´°</h1>
</script>

</body>
</html>
</html>
